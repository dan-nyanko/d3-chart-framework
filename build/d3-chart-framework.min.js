!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3"),require("underscore"),require("moment")):"function"==typeof define&&define.amd?define("d3-chart-framework",["d3","underscore","moment"],e):"object"==typeof exports?exports["d3-chart-framework"]=e(require("d3"),require("underscore"),require("moment")):t["d3-chart-framework"]=e(t.d3,t.underscore,t.moment)}(this,function(t,e,r){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1);Object.defineProperty(e,"Axes",{enumerable:!0,get:function(){return n(i).default}});var o=r(6);Object.defineProperty(e,"InvalidNodeError",{enumerable:!0,get:function(){return o.InvalidNodeError}}),Object.defineProperty(e,"InvalidGroupError",{enumerable:!0,get:function(){return o.InvalidGroupError}});var a=r(2);Object.defineProperty(e,"Grid",{enumerable:!0,get:function(){return n(a).default}});var s=r(7);Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return n(s).default}});var u=r(9);Object.defineProperty(e,"LineGroup",{enumerable:!0,get:function(){return n(u).default}});var l=r(10);Object.defineProperty(e,"NodeGroup",{enumerable:!0,get:function(){return n(l).default}});var c=r(8);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return n(c).default}});var h=r(11);Object.defineProperty(e,"LineNode",{enumerable:!0,get:function(){return n(h).default}});var f=r(12);Object.defineProperty(e,"RectNode",{enumerable:!0,get:function(){return n(f).default}});var p=r(13);Object.defineProperty(e,"SegmentNode",{enumerable:!0,get:function(){return n(p).default}});var d=r(14);Object.defineProperty(e,"Plot",{enumerable:!0,get:function(){return n(d).default}});var y=r(17);Object.defineProperty(e,"ScatterPlot",{enumerable:!0,get:function(){return n(y).default}});var m=r(18);Object.defineProperty(e,"LineChart",{enumerable:!0,get:function(){return n(m).default}});var v=r(15);Object.defineProperty(e,"Tooltip",{enumerable:!0,get:function(){return n(v).default}});var g=r(16);Object.defineProperty(e,"Zoom",{enumerable:!0,get:function(){return n(g).default}})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var r=e.diff(t,"days"),n="month";return r<=14?n="day":r>14&&r<=183&&(n="week"),n}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(2),u=n(s),l=r(3),c=r(4),h=r(5),f=function(){function t(e,r){i(this,t),this.chart=e,this.options=r||{x:{title:"x",type:"numeric"},y:{title:"y",type:"numeric"},grid:!0,filter:!0},this.initialized=!1,this.useAutoPadding=r.useAutoPadding||!1,this.initialMinMax=[[0,0],[0,0]],this.currentMinMax=[[0,0],[0,0]],this.draw()}return a(t,[{key:"draw",value:function(t,e){var r=this;"datetime"===this.options.x.type?t?this.xScale=l.scaleTime().domain(t).range([0,this.chart.getWidth()]).nice():this.xScale=l.scaleTime().domain(this.currentMinMax[0]).range([0,this.chart.getWidth()]).nice():t?this.xScale=l.scaleLinear().domain(t).range([0,this.chart.getWidth()]):this.xScale=l.scaleLinear().domain(this.currentMinMax[0]).range([0,this.chart.getWidth()]),"datetime"===this.options.x.type?this.xAxis=l.axisBottom().scale(this.xScale).ticks(10).tickFormat(l.timeFormat(this.formatDate())):this.xAxis=l.axisBottom().scale(this.xScale).ticks(10),"datetime"===this.options.x.type?(this.xGroup=this.chart.container.append("g").attr("class","x d3cf-axis").attr("transform","translate("+this.chart.margins.left+", "+this.chart.getHeight()+")").call(this.xAxis),this.xGroup.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform",function(){return"rotate(-65)"})):this.xGroup=this.chart.container.append("g").attr("class","x d3cf-axis").attr("transform","translate("+this.chart.margins.left+", "+this.chart.getHeight()+")").call(this.xAxis),e?this.yScale=l.scaleLinear().domain(e).range([this.chart.getHeight(),0]):this.yScale=l.scaleLinear().domain(this.currentMinMax[1]).range([this.chart.getHeight(),0]),this.yAxis=l.axisLeft().scale(this.yScale),this.yGroup=this.chart.container.append("g").attr("class","y d3cf-axis").attr("transform","translate("+this.chart.margins.left+", 0)").call(this.yAxis),this.options.grid&&(this.grid=new u.default(this,this.chart));var n=0;"datetime"===this.options.x.type&&(n=45),this.xLabel?this.xLabel.attr("dx",this.chart.width/2-(this.chart.margins.right+this.chart.margins.left)/2).attr("dy",this.chart.margins.bottom):this.xLabel=this.chart.container.append("g").attr("class","x d3cf-axis-label").attr("transform","translate("+this.chart.margins.left+", "+(this.chart.getHeight()+n)+")").append("text").attr("dx",this.chart.width/2-(this.chart.margins.right+this.chart.margins.left)/2).attr("dy",this.chart.margins.bottom).attr("class","d3cf-axis-label").style("text-anchor","middle").text(function(){return r.options.x.title||""}),this.yLabel?this.yLabel.attr("dx",-(this.chart.height/2)+(this.chart.margins.top+this.chart.margins.bottom)/2).attr("dy",-this.chart.margins.left):this.yLabel=this.chart.container.append("g").attr("class","y d3cf-axis-label").attr("transform","translate("+this.chart.margins.left+", 0)").append("text").attr("transform","rotate(-90)").attr("dx",-(this.chart.height/2)+(this.chart.margins.top+this.chart.margins.bottom)/2).attr("dy",-this.chart.margins.left).attr("class","d3cf-axis-label").style("text-anchor","middle").text(function(){return r.options.y.title})}},{key:"setDomain",value:function(e){var r=this,n=0,i=0;if("datetime"===this.options.x.type){var o=c.pluck(e,"x1"),a=c.pluck(e,"x2");n=t.minDatetime(o,this.useAutoPadding),i=n,a.length>0&&(i=t.maxDatetime(a,this.useAutoPadding)),isNaN(i)&&(i=t.maxDatetime(o,this.useAutoPadding))}else{var s=c.pluck(e,"x1"),u=c.pluck(e,"x2");n=t.minNumeric(s,this.useAutoPadding),i=n,u.length>0&&(i=t.maxNumeric(u,this.useAutoPadding)),isNaN(i)&&(i=t.maxNumeric(s,this.useAutoPadding))}var l=0,h=t.maxNumeric(c.pluck(e,"y1"),this.useAutoPadding);this.xScale.domain([n,i]),this.yScale.domain([l,h]),this.initialized===!1?(this.initialMinMax=[[n,i],[l,h]],this.options.filter&&this.chart.addFilter("_domain",function(t){var e=r.xScale.domain()[0];e instanceof Date&&(e=e.getTime());var n=r.xScale.domain()[1];n instanceof Date&&(n=n.getTime());var i=r.yScale.domain()[0],o=r.yScale.domain()[1];if(t.hasOwnProperty("x2")){if(t.x1>=e&&t.x2<=n&&t.y1>=i&&t.y1<=o)return t}else if(t.x1>=e&&t.y1>=i&&t.y1<=o)return t})):this.currentMinMax=[[n,i],[l,h]],this.initialized=!0}},{key:"setInitialMinMax",value:function(t){this.initialMinMax=t}},{key:"update",value:function(t,e){return this.remove(),t&&e&&this.setDomain(t),this.draw(this.xScale.domain(),this.yScale.domain()),this}},{key:"reset",value:function(){return this.remove(),this.draw(this.initialMinMax[0],this.initialMinMax[1]),this}},{key:"zoom",value:function(t){t.x1>t.x2?this.xScale.domain([t.x2,t.x1]):this.xScale.domain([t.x1,t.x2]),"datetime"===this.options.x.type&&this.xAxis.tickFormat(l.timeFormat(this.formatDate())),t.y1>t.y2?this.yScale.domain([t.y2,t.y1]):this.yScale.domain([t.y1,t.y2]);var e=this.chart.container.transition().duration(750);return this.xGroup.transition(e).call(this.xAxis),this.xGroup.selectAll("g").selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)"),this.yGroup.transition(e).call(this.yAxis),this.grid&&(this.grid.remove(),this.grid=new u.default(this,this.chart)),this}},{key:"remove",value:function(){if(this.xGroup.remove(),this.yGroup.remove(),this.grid)return this.grid.remove()}},{key:"formatDate",value:function(){var t=this.xScale.domain(),e=h.duration(h(t[1]).diff(t[0])).asDays();return e<=7?"%b %d - %H:%M":"%b %d, %Y"}}],[{key:"maxNumeric",value:function(t,e){var r=Math.floor(c.max(t));if(e){var n=String(r).split("").length;if(1===n)return 10;var i=Math.pow(10,n)/10;return r+i}return r}},{key:"minNumeric",value:function(t,e){var r=Math.floor(c.min(t));if(e){var n=String(r).split("").length;if(1===n)return 10;var i=Math.pow(10,n)/10;return r+i}return r}},{key:"maxDatetime",value:function(t,e){var r=h(c.max(t));if(e){var n=h(c.min(t)),i=o(n,r);return h(r).add(1,i).valueOf()}return r.valueOf()}},{key:"minDatetime",value:function(t,e){var r=h(c.min(t));if(e){var n=h(c.max(t)),i=o(r,n);return h(r).subtract(1,i).valueOf()}return r.valueOf()}}]),t}();t.exports=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3),a=function(){function t(e,r,i){return n(this,t),this.plot=r,this.options=i||{},this.axes=e,this.init(),this}return i(t,[{key:"init",value:function(){this.xGrid=o.axisBottom().scale(this.axes.xScale).tickFormat("").tickSize(this.plot.getHeight()*-1,0,0),this.xGroup=this.plot.container.insert("g",":first-child").attr("class","d3cf-grid").attr("transform","translate("+this.plot.margins.left+", "+this.plot.getHeight()+")").attr("opacity",null).call(this.xGrid),this.yGrid=o.axisLeft().scale(this.axes.yScale).tickFormat("").tickSize(this.plot.getWidth()*-1,0,0),this.yGroup=this.plot.container.insert("g",":first-child").attr("class","d3cf-grid").attr("transform","translate("+this.plot.margins.left+", 0)").attr("opacity",null).call(this.yGrid)}},{key:"remove",value:function(){this.xGroup.remove(),this.yGroup.remove()}}]),t}();t.exports=a},function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});e.InvalidNodeError=function(t){function e(t){r(this,e);var i=t||"Is not instanceof Node.";return n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i))}return i(e,t),e}(Error),e.InvalidGroupError=function(t){function e(t){r(this,e);var i=t||"Is not instanceof Group.";return n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i))}return i(e,t),e}(Error)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){var t=9,e="group-";return e+Math.random().toString(36).substr(2,t)}var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(8),u=n(s),l=r(6),c=r(3),h=r(4),f=function(){function t(e,r){i(this,t),this.options=r||{},this.id=this.options.id||o();var n=this.options.onEnter||t.onEnter;this.onEnter=h.bind(n,this);var a=this.options.onUpdate||t.onUpdate;this.onUpdate=h.bind(a,this);var s=this.options.onExit||t.onExit;return this.onExit=h.bind(s,this),this.nodes_={},this.chart=e,this}return a(t,[{key:"size",value:function(){return Object.values(this.nodes_).length}},{key:"addNode",value:function(t){if("undefined"==typeof t||!t instanceof u.default)throw new l.InvalidNodeError;return this.nodes_[t.id]=t,this}},{key:"removeNode",value:function(t){return this.nodes_.hasOwnProperty(t)&&delete this.nodes_[t],this}},{key:"getNodes",value:function(){return Object.values(this.nodes_)}},{key:"update",value:function(){throw new Error("Update must be implemented.")}},{key:"detached",value:function(){return this.remove(),this.group=c.select(document.createElementNS(c.namespaces.svg,"g")).attr("id",this.id).attr("class","d3cf-group").remove(),this.update(),this.group.node()}},{key:"remove",value:function(){this.group&&this.group.remove()}},{key:"destroy",value:function(){this.remove(),this.chart.removeLayer(this.id),this.nodes=null,this.chart=null,this.group=null}}],[{key:"onEnter",value:function(){}},{key:"onUpdate",value:function(){}},{key:"onExit",value:function(){}}]),t}();t.exports=f},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){var t=9,e="node-";return e+Math.random().toString(36).substr(2,t)}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(3),s=function(){function t(e){return n(this,t),this.id=e.id||i(),this.meta=e.meta||{},this.group=null,this}return o(t,[{key:"remove",value:function(){if(this.group)return this.group.remove()}},{key:"update",value:function(){return this}},{key:"detached",value:function(){return this.remove(),this.group=a.select(document.createElementNS(a.namespaces.svg,"g")).attr("id",this.id).attr("class","d3cf-node").attr("opacity",this.o).remove(),this.update(),this.group.node()}}]),t}();t.exports=s},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(7),l=n(u),c=r(3),h=function(t){function e(t,r){var n;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));a.s=r.s||"steelblue",a.w=r.w||1.5,a.meta=r.meta||{};var s=c.line().x(function(t){return a.chart.axes.xScale(t.x1)}).y(function(t){return a.chart.axes.yScale(t.y1)});return a.generator=r.generator||s,n=a,o(a,n)}return a(e,t),s(e,[{key:"update",value:function(){var t=this;if("undefined"!=typeof this.group){var e=this.chart.applyFilters(this.getNodes());this.group.attr("numNodes",e.length);var r=this.group.append("path").datum(e).attr("stroke",this.s).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",this.w).attr("class","d3cf-line").attr("d",function(e){return t.generator(e)}).call(this.onEnter);r.attr("stroke",this.s).attr("stroke-width",this.w).attr("d",function(e){return t.generator(e)}).call(this.onUpdate),r.exit().remove().call(this.onExit);var n=this.group.selectAll(".node").data(e,function(t){return t.id});n.enter().append(function(t){return t.detached()}).call(this.onEnter),n.each(function(t){return t.update()}).call(this.onUpdate),n.exit().remove().call(this.onExit)}}}]),e}(l.default);t.exports=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(7),l=n(u),c=function(t){function e(t,r){var n;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return n=a,o(a,n)}return a(e,t),s(e,[{key:"update",value:function(){if("undefined"!=typeof this.group){var t=this.chart.applyFilters(this.getNodes());this.group.attr("numNodes",t.length);var e=this.group.selectAll(".node").data(t,function(t){return t.id});e.enter().append(function(t){return t.detached()}).call(this.onEnter),e.each(function(t){return t.update()}).call(this.onUpdate),e.exit().remove().call(this.onExit)}}}]),e}(l.default);t.exports=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(8),l=n(u),c=r(3),h=function(t){function e(t,r){var n;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return a.chart=t,a.x1=r.x1,a.y1=r.y1,a.r=r.r||3,a.o=r.o||0,a.style=r.style||"d3cf-node",a.meta=r.meta||{},n=a,o(a,n)}return a(e,t),s(e,[{key:"getFill",value:function(t){var e="#33B5E";switch(t){case"warning":e="#FFBB33";break;case"success":e="#00C851";break;case"info":e="#33B5E5"}return e}},{key:"update",value:function(){var t=this;"undefined"==typeof this.group&&(this.group=c.select("#"+this.id));var e=this.group.selectAll("circle").data([this],function(t){return t.id});return e.enter().append("circle").attr("class",this.style).attr("cx",function(){return t.chart.axes.xScale(t.x1)}).attr("cy",function(){return t.chart.axes.yScale(t.y1)}).attr("r",function(){return t.r}).attr("opacity",function(){return t.o}).on("mouseover",function(){if(t.chart.tooltip)return t.chart.tooltip.mouseover(t,c.event.pageX,c.event.pageY)}).on("mouseout",function(){if(t.chart.tooltip)return t.chart.tooltip.mouseout()}),e.attr("cx",function(){return t.chart.axes.xScale(t.x1)}).attr("cy",function(){return t.chart.axes.yScale(t.y1)}).attr("r",function(){return t.r}).attr("opacity",function(){return t.o}),e.exit().remove(),this}}]),e}(l.default);t.exports=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(8),l=n(u),c=r(3),h=10,f=10,p=function(t){function e(t,r){var n;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return a.plot=t,a.x1=r.x1,a.x2=r.x2,a.y1=r.y1,a.h=r.h||10,a.f=r.f||"#345e7e",a.o=r.o||.4,a.style=r.style||"d3cf-node",n=a,o(a,n)}return a(e,t),s(e,[{key:"update",value:function(){var t=this;"undefined"==typeof this.group&&(this.group=c.select("#"+this.id));var e=this.group.selectAll("rect").data([this],function(t){return t.id});return e.enter().append("rect").attr("class",this.style).attr("x",function(){return t.plot.axes.xScale(t.x1)}).attr("y",function(){var e=t.h;return e<f&&(e=f),t.plot.axes.yScale(t.y1)-e/2}).attr("width",function(){var e=t.plot.axes.xScale(t.x2)-t.plot.axes.xScale(t.x1);return e<h&&(e=h),e}).attr("height",function(){var e=t.h;return e<f&&(e=f),e}).style("fill",function(){return t.f}).style("opacity",function(){return t.o}).on("mouseover",function(){if(t.plot.tooltip)return t.plot.tooltip.mouseover(t,c.event.pageX,c.event.pageY)}).on("mouseout",function(){if(t.plot.tooltip)return t.plot.tooltip.mouseout()}),e.attr("x",function(){return t.plot.axes.xScale(t.x1)}).attr("y",function(){var e=t.h;return e<f&&(e=f),t.plot.axes.yScale(t.y1)-e/2}).attr("width",function(){var e=t.plot.axes.xScale(t.x2)-t.plot.axes.xScale(t.x1);return e<h&&(e=h),e}).attr("height",function(){var e=t.h;return e<f&&(e=f),e}),e.exit().remove(),this}}]),e}(l.default);t.exports=p},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(3),l=n(u),c=r(4),h=n(c),f=r(8),p=n(f),d=4,y=5,m=2,v=function(t){function e(t,r){var n;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return a.plot=t,a.x=r.x,a.y=r.y,a.w=r.w,a.h=r.h||d,a.r=r.r||y,a.f=r.f||"#345e7e",a.o=r.o||.3,a.meta=r.meta||{},n=a,o(a,n)}return a(e,t),s(e,[{key:"remove",value:function(){if(this.group)return this.group.remove()}},{key:"filteredOrderedPair",value:function(t){return t[0]<this.plot.axes.xScale.range()[0]&&(t[0]=null),t[0]>this.plot.axes.xScale.range()[1]&&(t[0]=null),t[1]<this.plot.axes.yScale.range()[1]&&(t[1]=null),t[1]>this.plot.axes.yScale.range()[0]&&(t[1]=null),t}},{key:"update",value:function(){var t=this;"undefined"==typeof this.group&&(this.group=l.default.select("#"+this.id));var e=[[this.plot.axes.xScale(this.x),this.plot.axes.yScale(this.y)],[this.plot.axes.xScale(this.w),this.plot.axes.yScale(this.y)]],r=this.distance(e),n=this.plot.axes.xScale.range()[1],i=Math.floor(r/n*100),o=this.filteredOrderedPair([this.plot.axes.xScale(this.x),this.plot.axes.yScale(this.y)]),a=this.group.selectAll(".start-circle").data([this],function(t){return t.id});if(null!==o[0]&&null!==o[1]?(a.enter().append("circle").attr("class","start-circle").style("fill",this.f).attr("cx",o[0]).attr("cy",o[1]).attr("r",function(){var e=t.r;return e=Math.ceil(e*(i/100)+e),e<y&&(e=y),e}),a.attr("cx",o[0]).attr("cy",o[1]).attr("r",function(){var e=t.r;return e=Math.ceil(e*(i/100)+e),e<y&&(e=y),e}),a.exit().remove()):this.group.selectAll(".start-circle").remove(),i>=m){var s=this.group.selectAll("line").data([this],function(t){return t.id});s.enter().append("line").attr("x1",function(){return e[0][0]<=t.plot.axes.xScale.range()[0]?t.plot.axes.xScale.range()[0]:e[0][0]>=t.plot.axes.xScale.range()[1]?null:e[0][0]}).attr("y1",e[0][1]).attr("x2",function(){return e[1][0]>=t.plot.axes.xScale.range()[1]?t.plot.axes.xScale.range()[1]:e[1][0]<=t.plot.axes.xScale.range()[0]?null:e[1][0]}).attr("y2",e[1][1]).attr("stroke-width",function(){var e=t.h;return e=Math.ceil(e*(i/100)+e),e<d?d:e}).attr("stroke",this.f),s.attr("x1",function(){return e[0][0]<=t.plot.axes.xScale.range()[0]?t.plot.axes.xScale.range()[0]:e[0][0]>=t.plot.axes.xScale.range()[1]?null:e[0][0]}).attr("y1",e[0][1]).attr("x2",function(){return e[1][0]>=t.plot.axes.xScale.range()[1]?t.plot.axes.xScale.range()[1]:e[1][0]<=t.plot.axes.xScale.range()[0]?null:e[1][0]}).attr("y2",e[1][1]).attr("stroke-width",function(){var e=t.h;return e=Math.ceil(e*(i/100)+e),e<d?d:e})}else this.group.selectAll("line").remove();var u=this.filteredOrderedPair([this.plot.axes.xScale(this.w),this.plot.axes.yScale(this.y)]);if(i>=m)if(null!==u[0]&&null!==u[1]){var c=this.group.selectAll(".end-circle").data([this],function(t){return t.id});c.enter().append("circle").attr("class","end-circle").attr("cx",u[0]).attr("cy",u[1]).attr("r",function(){var e=t.r;return e=Math.ceil(e*i/100+e),e<y&&(e=y),e}).style("fill",this.f),c.attr("class","end-circle").attr("cx",u[0]).attr("cy",u[1]).attr("r",function(){var e=t.r;return e=Math.ceil(e*i/100+e),e<y&&(e=y),e})}else this.group.selectAll(".end-circle").remove();else this.group.selectAll(".end-circle").remove();return this}},{key:"detached",value:function(){this.remove(),this.group=l.default.select(document.createElementNS(l.default.namespaces.svg,"g")).attr("id",this.id).attr("class","node").attr("opacity",this.o).remove(),this.update(),this.group.node()}},{key:"distance",value:function(t){return Math.sqrt(Math.pow(Math.abs(t[0][0]-t[1][0]),2)+Math.pow(Math.abs(t[0][1]-t[1][1]),2))}}],[{key:"groupOverlappingSegments",value:function(t){var e={},r=h.default.groupBy(t,function(t){var e=!1;return e="undefined"!=typeof t.meta.cumulative&&t.meta.cumulative,t.y+":"+e});return Object.keys(r).forEach(function(t){var n=r[t];n.sort(function(t,e){return t.x-e.x});for(var i=0,o=[];i<n.length;)if(0!==i){var a=o.length-1;if(a<0)break;var s=o[a];if(n[i].x>=s.x&&n[i].w<=s.w){var u=s.w+":"+t,l=e[u];"undefined"==typeof l&&(l=[]),l.push(n[i]),i++}else{o[a+1]=n[i];var c=n[i].w+":"+t;e[c]=[n[i]],i++}}else{o[0]=n[0];var h=n[0].w+":"+t;e[h]=[n[0]],i++}}),e}}]),e}(p.default);t.exports=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(1),s=n(a),u=r(15),l=n(u),c=r(16),h=n(c),f=r(7),p=n(f),d=r(6),y=r(3),m=r(4),v=300,g=function(){function t(e){return i(this,t),this.options=e,this.drawn=!1,this.filters=e.filters||{},this.groups_={},this}return o(t,[{key:"init",value:function(){this.setDimensions();var t=this.options.scale||!1;t?this.root=y.select("#"+this.options.containerID).append("svg").attr("viewBox","0 0 "+this.viewBoxWidth+" "+this.viewBoxHeight).attr("preserveAspectRatio","xMinYMin meet"):this.root=y.select("#"+this.options.containerID).append("svg").attr("width",this.viewBoxWidth).attr("height",this.viewBoxHeight),this.container=this.root.append("g").attr("class",this.options.svgContainerClass).attr("width",this.getWidth()).attr("height",this.getHeight()).attr("transform","translate("+this.margins.left+", "+this.margins.top+")"),this.axes=new s.default(this,this.options.axes),this.tooltip=new l.default(this,this.options);var e=this.options.zoom||!1;return e&&(this.zoom=new h.default(this,this.options)),this.groups=this.container.append("g").attr("class","d3cf-groups").attr("transform","translate("+this.margins.left+", 0)"),this}},{key:"setDimensions",value:function(){return this.margins=this.options.margins||{left:40,right:20,top:20,bottom:40},this.width=this.options.width||document.getElementById(this.options.containerID).offsetWidth-(this.margins.left+this.margins.right),this.height=this.options.height,this.height<v&&(this.height=v),this.viewBoxWidth=this.width+this.margins.left+this.margins.right,this.viewBoxHeight=this.height+this.margins.top+this.margins.bottom,this}},{key:"update",value:function(t){if(this.setDimensions(),this.root.attr("width",this.viewBoxWidth).attr("height",this.viewBoxHeight),this.container.attr("width",this.width).attr("height",this.height).attr("transform","translate("+this.margins.left+", "+this.margins.top+")"),"undefined"==typeof t)this.axes.update(this.getGroupsNodes(),!1);else if(t instanceof Array)this.axes.update(t,!0),this.axes.initialized===!0&&this.axes.setInitialMinMax(this.axes.currentMinMax);else{var e=this.mergeGroups(t);this.axes.update(this.getGroupsNodes(!1),!0),e&&this.axes.setInitialMinMax(this.axes.currentMinMax)}return this}},{key:"draw",value:function(t){if(this.drawn||(this.drawn=!0,this.root.transition().style("opacity",1)),"undefined"==typeof t){if(this.getGroupsSize()<=0)return void this.showWarn()}else if(t instanceof Array){var e=this.defaultGroup(t);if(e.size()<=0)return void this.showWarn()}else if(this.getGroupsSize()<=0)return void this.showWarn();this.removeWarn()}},{key:"defaultGroup",value:function(){throw new Error("defaultGroup must be implemented.")}},{key:"applyFilters",value:function(t,e){var r=e||this.filters,n=[];return t&&(n=t.filter(function(t){for(var e=!0,n=Object.keys(r),i=0,o=n.length;i<o;){var a=n[i++],s=r[a](t);if("undefined"==typeof s){e=!1;break}}if(e)return t})),n}},{key:"getWidth",value:function(){return this.width-(this.margins.left+this.margins.right)}},{key:"getHeight",value:function(){return this.height-(this.margins.top+this.margins.bottom)}},{key:"showWarn",value:function(t){var e=t||"No data to display";return this.warn&&this.removeWarn(),this.warn=this.container.append("g").style("opacity",0).attr("class","d3cf-warn"),this.warn.append("text").attr("text-anchor","middle").attr("x",this.width/2).attr("y",this.getHeight()/2).text(e),this.warn.transition().style("opacity",1),this}},{key:"removeWarn",value:function(){return this.warn&&this.warn.remove(),this}},{key:"remove",value:function(){this.zoom.remove(),this.tooltip.remove(),this.axes.remove(),this.container.remove(),this.root.remove()}},{key:"destroy",value:function(){this.remove(),this.zoom=null,this.tooltip=null,this.axes=null,this.container=null,this.root=null,this.resizeHandler=null}},{key:"addGroup",value:function(t){if(t instanceof p.default==!1)throw new d.InvalidGroupError;return this.groups_[t.id]=t,this}},{key:"removeGroup",value:function(t){return this.groups_.hasOwnProperty(t)&&delete this.groups_[t],this}},{key:"getGroups",value:function(){return Object.values(this.groups_)}},{key:"getGroupsSize",value:function(t){var e=this;return this.getGroups().reduce(function(r,n){if(t)return r+e.applyFilters(n.getNodes()).length;var i=Object.assign({},e.filters);return i.hasOwnProperty("_domain")&&delete i._domain,r+e.applyFilters(n.getNodes(),i).length},0)}},{key:"getGroupsNodes",value:function(t){var e=this;return this.getGroups().reduce(function(r,n){
if(t)return r.concat(e.applyFilters(n.getNodes()));var i=Object.assign({},e.filters);return i.hasOwnProperty("_domain")&&delete i._domain,r.concat(e.applyFilters(n.getNodes(),i))},[])}},{key:"mergeGroups",value:function(){throw new Error("mergeGroups must be implemented.")}},{key:"addFilter",value:function(t,e){return this.filters[t]=m.bind(e,this),this}},{key:"removeFilter",value:function(t){return"undefined"!==this.filters[t]&&delete this.filters[t],this}},{key:"resetZoom",value:function(){if(this.zoom)return this.zoom.reset()}}]),t}();t.exports=g},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3),a=r(4),s=function(){function t(e,r){return n(this,t),this.tooltipOpts=r.tooltip||{opacity:1,template:a.template('<span style="font-weight: bold;"><%= obj.id %></span><p>x1: <%= obj.x1 %> x2: <% if (obj.x2) { %> <%= obj.x2 %> <% } %> y: <%= obj.y1 %></p>')},this.template=this.tooltipOpts.template||a.template('<span style="font-weight: bold;"><%= obj.id %></span><p>x1: <%= obj.x1 %> x2: <%= obj.x2 %> y: <%= obj.y1 %></p>'),this.opacity=this.tooltipOpts.opacity||1,this.element=o.select("body").append("div").attr("class","d3cf-tooltip").style("opacity",0).html(this.template({})),this}return i(t,[{key:"mouseover",value:function(t,e,r){var n=this.element.node().getBoundingClientRect();return e+n.width>=window.innerWidth-20?this.element.html(this.template(t)).style("left",e-10-Math.floor(n.width)+"px").style("top",r+"px"):this.element.html(this.template(t)).style("left",e+10+"px").style("top",r+"px"),this.element.transition().duration(200).style("opacity",this.opacity),this}},{key:"mouseout",value:function(){return this.element.transition().duration(500).style("opacity",0),this}},{key:"remove",value:function(){return this.element.remove()}}]),t}();t.exports=s},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(3),a=r(4),s=5,u=function(){function t(e,r){n(this,t),this.plot=e,this.options=r,this.bandPos=[-1,-1],this.zoomArea={x1:0,y1:0,x2:0,y2:0},this.drag=o.drag(),this.zoomGroup=e.container.append("g").attr("class","d3cf-zoom"),this.zoomBand=this.zoomGroup.append("rect").attr("width",0).attr("height",0).attr("x",0).attr("y",0).attr("class","d3cf-zoomBand"),this.zoomOverlay=this.zoomGroup.append("rect").attr("width",e.getWidth()).attr("height",e.getHeight()).attr("transform","translate("+e.margins.left+", 0)").attr("class","d3cf-zoomOverlay").call(this.drag),this.isZoomed=!1;var i=this;this.drag.on("start.plot",function(){var t=o.mouse(this);i.dragStart=t}),this.drag.on("drag.plot",function(){var t=o.mouse(this);a.bind(i.ondrag,i)(t)}),this.drag.on("end.plot",function(){var t=o.mouse(this),e=!1;Math.abs(i.dragStart[0]-t[0])>s&&(e=!0);var r=!1;Math.abs(i.dragStart[1]-t[1])>s&&(r=!0),a.bind(i.ondragend,i)(t,e&&r)})}return i(t,[{key:"ondrag",value:function(t){t[0]<this.bandPos[0]&&this.zoomBand.attr("transform","translate("+(t[0]+this.plot.margins.left)+", "+this.bandPos[1]+")"),t[1]<this.bandPos[1]&&this.zoomBand.attr("transform","translate("+(t[0]+this.plot.margins.left)+", "+t[1]+")"),t[1]<this.bandPos[1]&&t[0]>this.bandPos[0]&&this.zoomBand.attr("transform","translate("+(this.bandPos[0]+this.plot.margins.left)+", "+t[1]+")"),this.bandPos[0]===-1&&(this.bandPos=t,this.zoomBand.attr("transform","translate("+(this.bandPos[0]+this.plot.margins.left)+", "+this.bandPos[1]+")")),this.zoomBand.transition().duration(1).attr("width",Math.abs(this.bandPos[0]-t[0])).attr("height",Math.abs(this.bandPos[1]-t[1]))}},{key:"ondragend",value:function(t,e){var r=this.plot.axes.xScale.invert(this.bandPos[0]),n=this.plot.axes.xScale.invert(t[0]);r<n?(this.zoomArea.x1=r,this.zoomArea.x2=n):(this.zoomArea.x1=n,this.zoomArea.x2=r);var i=this.plot.axes.yScale.invert(t[1]),o=this.plot.axes.yScale.invert(this.bandPos[1]);i<o?(this.zoomArea.y1=i,this.zoomArea.y2=o):(this.zoomArea.y1=o,this.zoomArea.y2=i),this.bandPos=[-1,-1],this.zoomBand.transition().attr("width",0).attr("height",0).attr("x",this.bandPos[0]).attr("y",this.bandPos[1]),e&&this.zoom()}},{key:"zoom",value:function(){this.isZoomed=!0,this.plot.axes.zoom(this.zoomArea),this.plot.draw()}},{key:"reset",value:function(){this.isZoomed=!1,this.plot.axes.reset(),this.plot.draw()}},{key:"remove",value:function(){this.zoomGroup.remove(),this.drag.on("drag.plot",null),this.drag.on("end.plot",null),this.drag.on("start.plot",null)}}]),t}();t.exports=u},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=r(14),c=n(l),h=r(10),f=n(h),p=r(4),d=function(t){function e(t){var r;i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.init(),r=n,o(n,r)}return a(e,t),s(e,[{key:"init",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this);var t=this.options.resize||!0;if(t)return this.resizeHandler=p.debounce(p.bind(this.resize,this),500),window.addEventListener("resize",this.resizeHandler)}},{key:"draw",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t);var r=this.groups.selectAll(".group").data(this.getGroups(),function(t){return t.id});return r.enter().append(function(t){return t.detached()}),r.each(function(t){return t.update()}),r.exit().remove(),this}},{key:"defaultGroup",value:function(t){var e=this.getGroups().find(function(t){return"default_"===t.id});return"undefined"==typeof e&&(e=this.options.group&&this.options.group.onEnter?new f.default(this,{id:"default_",onEnter:this.options.group.onEnter}):new f.default(this,{id:"default_"})),t.forEach(function(t){return e.addNode(t)}),e}},{key:"mergeGroups",value:function(t){var e=this,r=Object.keys(this.groups_),n=!1;return Object.keys(t).forEach(function(i){var o=-1,a=e.groups_[i];if("undefined"==typeof a){if(n=!0,!(t[i]instanceof f.default))throw new Error("Must be instance of a d3cf Group.");a=t[i],e.addGroup(a)}else o=r.indexOf(i),o>=0&&(r.splice(o,1),t[i].getNodes().forEach(function(t){a.addNode(t)}))}),r.length>0?(r.forEach(function(t){e.removeGroup(t)}),!0):!(!n||this.axes.initialized!==!0)}},{key:"update",value:function(t){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.draw(t),this}},{key:"remove",value:function(){return this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this}},{key:"resize",value:function(){return this.update(),this}},{key:"resetZoom",value:function(){if(this.zoom)return this.zoom.reset()}}]),e}(c.default);t.exports=d},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function t(e,r,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=r(14),c=n(l),h=r(9),f=n(h),p=r(4),d=function(t){function e(t){var r;i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.init(),r=n,o(n,r)}return a(e,t),s(e,[{key:"init",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this);var t=this.options.resize||!0;if(t)return this.resizeHandler=p.debounce(p.bind(this.resize,this),500),window.addEventListener("resize",this.resizeHandler)}},{key:"draw",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t);var r=this.groups.selectAll(".group").data(this.getGroups(),function(t){return t.id});return r.enter().append(function(t){return t.detached()}),r.each(function(t){return t.update()}),r.exit().remove(),this}},{key:"defaultGroup",value:function(t){var e=this.getGroups().find(function(t){return"default_"===t.id});return"undefined"==typeof e&&(e=this.options.group&&this.options.group.onEnter?new f.default(this,{id:"default_",onEnter:this.options.group.onEnter}):new f.default(this,{id:"default_"})),t.forEach(function(t){return e.addNode(t)}),e}},{key:"mergeGroups",value:function(t){var e=this,r=Object.keys(this.groups_),n=!1;return Object.keys(t).forEach(function(i){var o=-1,a=e.groups_[i];if("undefined"==typeof a){if(n=!0,!(t[i]instanceof f.default))throw new Error("Must be instance of a d3cf Group.");a=t[i],e.addGroup(a)}else o=r.indexOf(i),o>=0&&(r.splice(o,1),t[i].getNodes().forEach(function(t){a.addNode(t)}))}),r.length>0?(r.forEach(function(t){e.removeGroup(t)}),!0):!(!n||this.axes.initialized!==!0)}},{key:"update",value:function(t){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.draw(t),this}},{key:"remove",value:function(){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this}},{key:"resize",value:function(){return this.update(),this}}]),e}(c.default);t.exports=d}])});
//# sourceMappingURL=d3-chart-framework.min.js.map